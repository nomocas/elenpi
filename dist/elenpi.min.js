!function(){function n(){this._queue=[],this.__lexer__=!0}function t(n,r,e,u){"string"==typeof r&&(r=u.rules[r]);for(var i=r._queue,o=0,s=i.length;s>o&&n;++o){var h=i[o];if(n=h.__lexer__?t(n,h,e,u):h.call(u,n,e),n===!1)return!1}return n}var r=/^[\s\n\r]+/;n.prototype={done:function(n){return this._queue.push(n),this},log:function(n){return n=n||"",this.done(function(t,r){return console.log("Rule.log : ",n,t,r),t})},regExp:function(n,t,r){return this.done(function(e,u){var i=n.exec(e);return i?(r&&("string"==typeof r?u[r]=i[0]:r.call(this,u,i)),e.substring(i[0].length)):t?e:!1})},"char":function(n,t){return this.done(function(r,e){return r[0]===n?r.substring(1):t?r:!1})},xOrMore:function(n,r,e,u){return u=u||0,this.done(function(i,o){for(var s=[],h=!0,l=0;h&&i;){var f=n?{}:o;h=t(i,r,f,this),h!==!1&&(l++,i=h,f.skip||s.push(f),e&&i&&(h=t(i,e,o,this),h!==!1&&(i=h)))}return u>l?!1:(n&&s.length&&(o[n]=s),i)})},zeroOrMore:function(n,t,r){return this.xOrMore(n,t,r,0)},oneOrMore:function(n,t,r){return this.xOrMore(n,t,r,1)},zeroOrOne:function(n,r){return 1===arguments.length&&(r=n,n=null),this.done(function(e,u){var i=n?{}:u,o=t(e,r,i,this);return o!==!1&&(n&&(u[n]=i),e=o),e})},oneOf:function(n,r){return 1===arguments.length&&(r=n,n=null),this.done(function(e,u){for(var i=0;i<r.length;){var o=n?{}:u,s=t(e,r[i],o,this);if(s!==!1)return n&&(u[n]=o),s;i++}return!1})},rule:function(n){var r;return this.done(function(e,u){if(!r&&(r=this.rules[n],!r))throw new Error("elenpi.Rule :  rules not found : "+n);return t(e,r,u,this)})},skip:function(){return this.done(function(n,t){return t.skip=!0,n})},space:function(n){return this.done(function(t,e){var u=(this.rules.space||r).exec(t);return u?t.substring(u[0].length):n?!1:t})}};var e=function(n,t){this.rules=n,this.defaultRule=t};e.prototype={exec:function(n,r,e){return e||(e=this.rules[this.defaultRule]),"string"==typeof e&&(e=this.rules[e]),t(n,e,r,this)},parse:function(n,r){var e={};r||(r=this.rules[this.defaultRule]),"string"==typeof r&&(r=this.rules[r]);var u=t(n,r,e,this);return u===!1||u.length>0?!1:e}};var u={r:function(){return new n},Rule:n,Parser:e};"undefined"!=typeof module&&module.exports?module.exports=u:this.elenpi=u}();